<!DOCUMENT HTML>
<html>
<head>
  <title>TITLE</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
  <form name="form1">
    <input type="text" name="text1" id="text1" value="" /><br>
    <span name="span1" id="span1"></span><br>
    <input type="button" name="btn" id="btn" value="CLICK!!" onclick="focusSet('text1');" /><br><br>
    <textarea name="textArea" id="textArea" style="width: 50%; height: 50%;"></textarea>
  </form>
  <script>
    const addLog = (text) => {
      document.form1.textArea.value = document.form1.textArea.value +
        (document.form1.textArea.value==""?"":"\n") + text;
    }

    document.getElementById("text1").onkeydown = function(e){
      addLog(e.keyCode);
      e.preventDefault();
    }

    const focusSet = function(id) {
      addLog("focusSet");
      document.getElementById(id).focus();
    };

    const promise = new Promise(resolve => {
      const fire = () => {
        resolve();
        document.removeEventListener('DOMContentLoaded', fire, false);
        addLog("END DOMContentLoaded");
      };
      document.addEventListener('DOMContentLoaded', fire, false);
    });

    window.addEventListener('load', function(){
      addLog("END load !!");
      document.form1.btn.click();
      document.getElementById("span1").innerHTML = '<input type="text" name="text2" id="text2" value="" />';

//      setTimeout(()=>{ document.form1.text2.focus(); }, 3000);
/*
      setTimeout(()=>{
        document.dispatchEvent(new KeyboardEvent("keydown",{
            key: "a"
        }));
      }, 3000);
*/
    }, false);

    class TouchEmulator {
      constructor(){
        this.touches = [];
      }

      touchstart(id, point){
        const target = document.elementFromPoint(point.x, point.y);
        const touch = this.createTouch(id, target, point);

        this.touches.push(touch);

        this.triggerTouchEvent('touchstart', touch);
      }

      touchmove(id, point){
        const index = this.touches.findIndex(t => t.identifier === id);
        const target = this.touches[index].target;

        const touch = this.createTouch(id, target, point);

        this.touches[index] = touch;

        this.triggerTouchEvent('touchmove', touch);
      }

      touchend(id, point){
        const target = this.touches.find(t => t.identifier === id).target;

        const touch = this.createTouch(id, target, point);

        this.touches = this.touches.filter(t => t.identifier !== id);

        this.triggerTouchEvent('touchend', touch);
      }

      createTouch(identifier, target, point){
        return new Touch({
          identifier,
          target,
          clientX: point.x,
          clientY: point.y,
          pageX: point.x + window.pageXOffset,
          pageY: point.y + window.pageYOffset,
          radiusX: 10,
          radiusY: 10,
          force: 1
        });  
      }

      triggerTouchEvent(name, touch) {
        const targetTouches = this.touches.filter(t => t.target === touch.target);
        const event = new TouchEvent(name, {
          touches: this.touches,
          targetTouches,
          changedTouches: [touch],
          bubbles: true,
          cancelable: true,
          view: window
        });
        touch.target.dispatchEvent(event);
      }
    }
  </script>
</body>
</html>